(function(d){function e(v,u){u=u||{};var r={};if(u.onSubmit){if(u.onSubmit.call(v,r)==false){return}}var q=d(v);if(u.url){q.attr("action",u.url)}var p="easyui_frame_"+(new Date().getTime());var o=d("<iframe id="+p+" name="+p+"></iframe>").attr("src",window.ActiveXObject?"javascript:false":"about:blank").css({position:"absolute",top:-1000,left:-1000});var x=q.attr("target"),w=q.attr("action");q.attr("target",p);var l=d();try{o.appendTo("body");o.bind("load",j);for(var i in r){var m=d('<input type="hidden" name="'+i+'">').val(r[i]).appendTo(q);l=l.add(m)}k();q[0].submit()}finally{q.attr("action",w);x?q.attr("target",x):q.removeAttr("target");l.remove()}function k(){var t=d("#"+p);if(!t.length){return}try{var n=t.contents()[0].readyState;if(n&&n.toLowerCase()=="uninitialized"){setTimeout(k,100)}}catch(y){j()}}var s=10;function j(){var A=d("#"+p);if(!A.length){return}A.unbind();var z="";try{var t=A.contents().find("body");z=t.html();if(z==""){if(--s){setTimeout(j,100);return}}var y=t.find(">textarea");if(y.length){z=y.val()}else{var n=t.find(">pre");if(n.length){z=n.html()}}}catch(B){}if(u.success){u.success(z)}setTimeout(function(){A.unbind();A.remove()},100)}}function h(p,o){if(!d.data(p,"form")){d.data(p,"form",{options:d.extend({},d.fn.form.defaults)})}var n=d.data(p,"form").options;if(typeof o=="string"){var m={};if(n.onBeforeLoad.call(p,m)==false){return}d.ajax({url:o,data:m,dataType:"json",success:function(q){l(q)},error:function(){n.onLoadError.apply(p,arguments)}})}else{l(o)}function l(t){var s=d(p);for(var q in t){var v=t[q];var r=i(q,v);if(!r.length){var u=k(q,v);if(!u){d('input[name="'+q+'"]',s).val(v);d('textarea[name="'+q+'"]',s).val(v);d('select[name="'+q+'"]',s).val(v)}}j(q,v)}n.onLoadSuccess.call(p,t);a(p)}function i(q,s){var r=d(p).find('input[name="'+q+'"][type=radio], input[name="'+q+'"][type=checkbox]');r._propAttr("checked",false);r.each(function(){var t=d(this);if(t.val()==String(s)||d.inArray(t.val(),d.isArray(s)?s:[s])>=0){t._propAttr("checked",true)}});return r}function k(s,w){var q=0;var r=["numberbox","slider"];for(var t=0;t<r.length;t++){var v=r[t];var u=d(p).find("input["+v+'Name="'+s+'"]');if(u.length){u[v]("setValue",w);q+=u.length}}return q}function j(r,t){var q=d(p);var w=["combobox","combotree","combogrid","datetimebox","datebox","combo"];var v=q.find('[comboName="'+r+'"]');if(v.length){for(var s=0;s<w.length;s++){var u=w[s];if(v.hasClass(u+"-f")){if(v[u]("options").multiple){v[u]("setValues",t)}else{v[u]("setValue",t)}return}}}}}function f(o){d("input,select,textarea",o).each(function(){var p=this.type,i=this.tagName.toLowerCase();if(p=="text"||p=="hidden"||p=="password"||i=="textarea"){this.value=""}else{if(p=="file"){var r=d(this);var q=r.clone().val("");q.insertAfter(r);if(r.data("validatebox")){r.validatebox("destroy");q.validatebox()}else{r.remove()}}else{if(p=="checkbox"||p=="radio"){this.checked=false}else{if(i=="select"){this.selectedIndex=-1}}}}});var l=d(o);var m=["combo","combobox","combotree","combogrid","slider"];for(var k=0;k<m.length;k++){var j=m[k];var n=l.find("."+j+"-f");if(n.length&&n[j]){n[j]("clear")}}a(o)}function c(o){o.reset();var l=d(o);var m=["combo","combobox","combotree","combogrid","datebox","datetimebox","spinner","timespinner","numberbox","numberspinner","slider"];for(var k=0;k<m.length;k++){var j=m[k];var n=l.find("."+j+"-f");if(n.length&&n[j]){n[j]("reset")}}a(o)}function b(j){var k=d.data(j,"form").options;var i=d(j);i.unbind(".form").bind("submit.form",function(){setTimeout(function(){e(j,k)},0);return false})}function a(j){if(d.fn.validatebox){var k=d(j);k.find(".validatebox-text:not(:disabled)").validatebox("validate");var i=k.find(".validatebox-invalid");i.filter(":not(:disabled):first").focus();return i.length==0}return true}function g(j,i){d(j).find(".validatebox-text:not(:disabled)").validatebox(i?"disableValidation":"enableValidation")}d.fn.form=function(j,i){if(typeof j=="string"){return d.fn.form.methods[j](this,i)}j=j||{};return this.each(function(){if(!d.data(this,"form")){d.data(this,"form",{options:d.extend({},d.fn.form.defaults,j)})}b(this)})};d.fn.form.methods={submit:function(j,i){return j.each(function(){var k=d.extend({},d.fn.form.defaults,d.data(this,"form")?d.data(this,"form").options:{},i||{});e(this,k)})},load:function(j,i){return j.each(function(){h(this,i)})},clear:function(i){return i.each(function(){f(this)})},reset:function(i){return i.each(function(){c(this)})},validate:function(i){return a(i[0])},disableValidation:function(i){return i.each(function(){g(this,true)})},enableValidation:function(i){return i.each(function(){g(this,false)})}};d.fn.form.defaults={url:null,onSubmit:function(i){return d(this).form("validate")},success:function(i){},onBeforeLoad:function(i){},onLoadSuccess:function(i){},onLoadError:function(){}}})(jQuery);