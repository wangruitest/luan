(function(e){var i=false;function h(t){var q=e.data(t,"layout");var p=q.options;var n=q.panels;var k=e(t);if(t.tagName=="BODY"){k._fit()}else{p.fit?k.css(k._fit()):k._fit(false)}var m={top:0,left:0,width:k.width(),height:k.height()};l(f(n.expandNorth)?n.expandNorth:n.north,"n");l(f(n.expandSouth)?n.expandSouth:n.south,"s");s(f(n.expandEast)?n.expandEast:n.east,"e");s(f(n.expandWest)?n.expandWest:n.west,"w");n.center.panel("resize",m);function r(u){var v=u.panel("options");return Math.min(Math.max(v.height,v.minHeight),v.maxHeight)}function o(v){var u=v.panel("options");return Math.min(Math.max(u.width,u.minWidth),u.maxWidth)}function l(u,x){if(!u.length||!f(u)){return}var w=u.panel("options");var v=r(u);u.panel("resize",{width:k.width(),height:v,left:0,top:(x=="n"?0:k.height()-v)});m.height-=v;if(x=="n"){m.top+=v;if(!w.split&&w.border){m.top--}}if(!w.split&&w.border){m.height++}}function s(u,x){if(!u.length||!f(u)){return}var w=u.panel("options");var v=o(u);u.panel("resize",{width:v,height:m.height,left:(x=="e"?k.width()-v:0),top:m.top});m.width-=v;if(x=="w"){m.left+=v;if(!w.split&&w.border){m.left--}}if(!w.split&&w.border){m.width++}}}function c(l){var m=e(l);m.addClass("layout");function k(n){n.children("div").each(function(){var o=e.fn.layout.parsePanelOptions(this);if("north,south,east,west,center".indexOf(o.region)>=0){d(l,o,this)}})}m.children("form").length?k(m.children("form")):k(m);m.append('<div class="layout-split-proxy-h"></div><div class="layout-split-proxy-v"></div>');m.bind("_resize",function(p,n){var o=e.data(l,"layout").options;if(o.fit==true||n){h(l)}return false})}function d(s,r,l){r.region=r.region||"center";var o=e.data(s,"layout").panels;var p=e(s);var q=r.region;if(o[q].length){return}var m=e(l);if(!m.length){m=e("<div></div>").appendTo(p)}var n=e.extend({},e.fn.layout.paneldefaults,{width:(m.length?parseInt(m[0].style.width)||m.outerWidth():"auto"),height:(m.length?parseInt(m[0].style.height)||m.outerHeight():"auto"),doSize:false,collapsible:true,cls:("layout-panel layout-panel-"+q),bodyCls:"layout-body",onOpen:function(){var v=e(this).panel("header").children("div.panel-tool");v.children("a.panel-tool-collapse").hide();var u={north:"up",south:"down",east:"right",west:"left"};if(!u[q]){return}var x="layout-button-"+u[q];var w=v.children("a."+x);if(!w.length){w=e('<a href="javascript:void(0)"></a>').addClass(x).appendTo(v);w.bind("click",{dir:q},function(y){j(s,y.data.dir);return false})}e(this).panel("options").collapsible?w.show():w.hide()}},r);m.panel(n);o[q]=m;if(m.panel("options").split){var k=m.panel("panel");k.addClass("layout-split-"+q);var t="";if(q=="north"){t="s"}if(q=="south"){t="n"}if(q=="east"){t="w"}if(q=="west"){t="e"}k.resizable(e.extend({},{handles:t,onStartResize:function(z){i=true;if(q=="north"||q=="south"){var x=e(">div.layout-split-proxy-v",s)}else{var x=e(">div.layout-split-proxy-h",s)}var y=0,w=0,v=0,u=0;var A={display:"block"};if(q=="north"){A.top=parseInt(k.css("top"))+k.outerHeight()-x.height();A.left=parseInt(k.css("left"));A.width=k.outerWidth();A.height=x.height()}else{if(q=="south"){A.top=parseInt(k.css("top"));A.left=parseInt(k.css("left"));A.width=k.outerWidth();A.height=x.height()}else{if(q=="east"){A.top=parseInt(k.css("top"))||0;A.left=parseInt(k.css("left"))||0;A.width=x.width();A.height=k.outerHeight()}else{if(q=="west"){A.top=parseInt(k.css("top"))||0;A.left=k.outerWidth()-x.width();A.width=x.width();A.height=k.outerHeight()}}}}x.css(A);e('<div class="layout-mask"></div>').css({left:0,top:0,width:p.width(),height:p.height()}).appendTo(p)},onResize:function(v){if(q=="north"||q=="south"){var u=e(">div.layout-split-proxy-v",s);u.css("top",v.pageY-e(s).offset().top-u.height()/2)}else{var u=e(">div.layout-split-proxy-h",s);u.css("left",v.pageX-e(s).offset().left-u.width()/2)}return false},onStopResize:function(u){p.children("div.layout-split-proxy-v,div.layout-split-proxy-h").hide();m.panel("resize",u.data);h(s);i=false;p.find(">div.layout-mask").remove()}},r))}}function a(n,m){var l=e.data(n,"layout").panels;if(l[m].length){l[m].panel("destroy");l[m]=e();var k="expand"+m.substring(0,1).toUpperCase()+m.substring(1);if(l[k]){l[k].panel("destroy");l[k]=undefined}}}function j(u,t,s){if(s==undefined){s="normal"}var r=e.data(u,"layout").panels;var k=r[t];var q=k.panel("options");if(q.onBeforeCollapse.call(k)==false){return}var o="expand"+t.substring(0,1).toUpperCase()+t.substring(1);if(!r[o]){r[o]=n(t);r[o].panel("panel").bind("click",function(){var p=m();k.panel("expand",false).panel("open").panel("resize",p.collapse);k.panel("panel").animate(p.expand,function(){e(this).unbind(".layout").bind("mouseleave.layout",{region:t},function(v){if(i==true){return}j(u,v.data.region)})});return false})}var l=m();if(!f(r[o])){r.center.panel("resize",l.resizeC)}k.panel("panel").animate(l.collapse,s,function(){k.panel("collapse",false).panel("close");r[o].panel("open").panel("resize",l.expandP);e(this).unbind(".layout")});function n(v){var x;if(v=="east"){x="layout-button-left"}else{if(v=="west"){x="layout-button-right"}else{if(v=="north"){x="layout-button-down"}else{if(v=="south"){x="layout-button-up"}}}}var w=e("<div></div>").appendTo(u);w.panel(e.extend({},e.fn.layout.paneldefaults,{cls:("layout-expand layout-expand-"+v),title:"&nbsp;",closed:true,minWidth:0,minHeight:0,doSize:false,tools:[{iconCls:x,handler:function(){g(u,t);return false}}]}));w.panel("panel").hover(function(){e(this).addClass("layout-expand-over")},function(){e(this).removeClass("layout-expand-over")});return w}function m(){var y=e(u);var x=r.center.panel("options");var v=q.collapsedSize;if(t=="east"){var w=x.width+q.width-v;if(q.split||!q.border){w++}return{resizeC:{width:w},expand:{left:y.width()-q.width},expandP:{top:x.top,left:y.width()-v,width:v,height:x.height},collapse:{left:y.width(),top:x.top,height:x.height}}}else{if(t=="west"){var w=x.width+q.width-v;if(q.split||!q.border){w++}return{resizeC:{width:w,left:v-1},expand:{left:0},expandP:{left:0,top:x.top,width:v,height:x.height},collapse:{left:-q.width,top:x.top,height:x.height}}}else{if(t=="north"){var p=x.height;if(!f(r.expandNorth)){p+=q.height-v+((q.split||!q.border)?1:0)}r.east.add(r.west).add(r.expandEast).add(r.expandWest).panel("resize",{top:v-1,height:p});return{resizeC:{top:v-1,height:p},expand:{top:0},expandP:{top:0,left:0,width:y.width(),height:v},collapse:{top:-q.height,width:y.width()}}}else{if(t=="south"){var p=x.height;if(!f(r.expandSouth)){p+=q.height-v+((q.split||!q.border)?1:0)}r.east.add(r.west).add(r.expandEast).add(r.expandWest).panel("resize",{height:p});return{resizeC:{height:p},expand:{top:y.height()-q.height},expandP:{top:y.height()-v,left:0,width:y.width(),height:v},collapse:{top:y.height(),width:y.width()}}}}}}}}function g(r,o){var q=e.data(r,"layout").panels;var s=q[o];var n=s.panel("options");if(n.onBeforeExpand.call(s)==false){return}var m=l();var k="expand"+o.substring(0,1).toUpperCase()+o.substring(1);if(q[k]){q[k].panel("close");s.panel("panel").stop(true,true);s.panel("expand",false).panel("open").panel("resize",m.collapse);s.panel("panel").animate(m.expand,function(){h(r)})}function l(){var t=e(r);var p=q.center.panel("options");if(o=="east"&&q.expandEast){return{collapse:{left:t.width(),top:p.top,height:p.height},expand:{left:t.width()-q.east.panel("options").width}}}else{if(o=="west"&&q.expandWest){return{collapse:{left:-q.west.panel("options").width,top:p.top,height:p.height},expand:{left:0}}}else{if(o=="north"&&q.expandNorth){return{collapse:{top:-q.north.panel("options").height,width:t.width()},expand:{top:0}}}else{if(o=="south"&&q.expandSouth){return{collapse:{top:t.height(),width:t.width()},expand:{top:t.height()-q.south.panel("options").height}}}}}}}}function f(k){if(!k){return false}if(k.length){return k.panel("panel").is(":visible")}else{return false}}function b(l){var k=e.data(l,"layout").panels;if(k.east.length&&k.east.panel("options").collapsed){j(l,"east",0)}if(k.west.length&&k.west.panel("options").collapsed){j(l,"west",0)}if(k.north.length&&k.north.panel("options").collapsed){j(l,"north",0)}if(k.south.length&&k.south.panel("options").collapsed){j(l,"south",0)}}e.fn.layout=function(l,k){if(typeof l=="string"){return e.fn.layout.methods[l](this,k)}l=l||{};return this.each(function(){var n=e.data(this,"layout");if(n){e.extend(n.options,l)}else{var m=e.extend({},e.fn.layout.defaults,e.fn.layout.parseOptions(this),l);e.data(this,"layout",{options:m,panels:{center:e(),north:e(),south:e(),east:e(),west:e()}});c(this)}h(this);b(this)})};e.fn.layout.methods={resize:function(k){return k.each(function(){h(this)})},panel:function(l,k){return e.data(l[0],"layout").panels[k]},collapse:function(l,k){return l.each(function(){j(this,k)})},expand:function(l,k){return l.each(function(){g(this,k)})},add:function(l,k){return l.each(function(){d(this,k);h(this);if(e(this).layout("panel",k.region).panel("options").collapsed){j(this,k.region,0)}})},remove:function(l,k){return l.each(function(){a(this,k);h(this)})}};e.fn.layout.parseOptions=function(k){return e.extend({},e.parser.parseOptions(k,[{fit:"boolean"}]))};e.fn.layout.defaults={fit:false};e.fn.layout.parsePanelOptions=function(l){var k=e(l);return e.extend({},e.fn.panel.parseOptions(l),e.parser.parseOptions(l,["region",{split:"boolean",collpasedSize:"number",minWidth:"number",minHeight:"number",maxWidth:"number",maxHeight:"number"}]))};e.fn.layout.paneldefaults=e.extend({},e.fn.panel.defaults,{region:null,split:false,collapsedSize:28,minWidth:10,minHeight:10,maxWidth:10000,maxHeight:10000})})(jQuery);