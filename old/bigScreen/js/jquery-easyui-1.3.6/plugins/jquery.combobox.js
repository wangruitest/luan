(function(e){var k=0;function j(s,r){var q=e.data(s,"combobox");var o=q.options;var n=q.data;for(var p=0;p<n.length;p++){if(n[p][o.valueField]==r){return p}}return -1}function f(n,r){var q=e.data(n,"combobox").options;var p=e(n).combo("panel");var o=q.finder.getEl(n,r);if(o.length){if(o.position().top<=0){var s=p.scrollTop()+o.position().top;p.scrollTop(s)}else{if(o.position().top+o.outerHeight()>p.height()){var s=p.scrollTop()+o.position().top+o.outerHeight()-p.height();p.scrollTop(s)}}}}function g(u,n){var t=e.data(u,"combobox").options;var s=e(u).combobox("panel");var q=s.children("div.combobox-item-hover");if(!q.length){q=s.children("div.combobox-item-selected")}q.removeClass("combobox-item-hover");var p="div.combobox-item:visible:not(.combobox-item-disabled):first";var o="div.combobox-item:visible:not(.combobox-item-disabled):last";if(!q.length){q=s.children(n=="next"?p:o)}else{if(n=="next"){q=q.nextAll(p);if(!q.length){q=s.children(p)}}else{q=q.prevAll(p);if(!q.length){q=s.children(o)}}}if(q.length){q.addClass("combobox-item-hover");var r=t.finder.getRow(u,q);if(r){f(u,r[t.valueField]);if(t.selectOnNavigation){a(u,r[t.valueField])}}}}function a(q,p){var o=e.data(q,"combobox").options;var n=e(q).combo("getValues");if(e.inArray(p+"",n)==-1){if(o.multiple){n.push(p)}else{n=[p]}d(q,n);o.onSelect.call(q,o.finder.getRow(q,p))}}function b(r,q){var p=e.data(r,"combobox").options;var n=e(r).combo("getValues");var o=e.inArray(q+"",n);if(o>=0){n.splice(o,1);d(r,n);p.onUnselect.call(r,p.finder.getRow(r,q))}}function d(p,o,n){var y=e.data(p,"combobox").options;var u=e(p).combo("panel");u.find("div.combobox-item-selected").removeClass("combobox-item-selected");var r=[],z=[];for(var q=0;q<o.length;q++){var t=o[q];var x=t;y.finder.getEl(p,t).addClass("combobox-item-selected");var w=y.finder.getRow(p,t);if(w){x=w[y.textField]}r.push(t);z.push(x)}e(p).combo("setValues",r);if(!n){e(p).combo("setText",z.join(y.separator))}}function m(u,r,q){var n=e.data(u,"combobox");var C=n.options;n.data=C.loadFilter.call(u,r);n.groups=[];r=n.data;var z=e(u).combobox("getValues");var w=[];var x=undefined;for(var o=0;o<r.length;o++){var B=r[o];var t=B[C.valueField]+"";var A=B[C.textField];var p=B[C.groupField];if(p){if(x!=p){x=p;n.groups.push(p);w.push('<div id="'+(n.groupIdPrefix+"_"+(n.groups.length-1))+'" class="combobox-group">');w.push(C.groupFormatter?C.groupFormatter.call(u,p):p);w.push("</div>")}}else{x=undefined}var y="combobox-item"+(B.disabled?" combobox-item-disabled":"")+(p?" combobox-gitem":"");w.push('<div id="'+(n.itemIdPrefix+"_"+o)+'" class="'+y+'">');w.push(C.formatter?C.formatter.call(u,B):A);w.push("</div>");if(B.selected&&e.inArray(t,z)==-1){z.push(t)}}e(u).combo("panel").html(w.join(""));if(C.multiple){d(u,z,q)}else{d(u,z.length?[z[z.length-1]]:[],q)}C.onLoadSuccess.call(u,r)}function l(p,r,q,o){var n=e.data(p,"combobox").options;if(r){n.url=r}q=q||{};if(n.onBeforeLoad.call(p,q)==false){return}n.loader.call(p,q,function(s){m(p,s,o)},function(){n.onLoadError.apply(this,arguments)})}function i(v,t){var u=e.data(v,"combobox");var s=u.options;if(s.multiple&&!t){d(v,[],true)}else{d(v,[t],true)}if(s.mode=="remote"){l(v,null,{q:t},true)}else{var p=e(v).combo("panel");p.find("div.combobox-item-selected,div.combobox-item-hover").removeClass("combobox-item-selected combobox-item-hover");p.find("div.combobox-item,div.combobox-group").hide();var o=u.data;var r=[];var n=s.multiple?t.split(s.separator):[t];e.map(n,function(A){A=e.trim(A);var D=undefined;for(var x=0;x<o.length;x++){var C=o[x];if(s.filter.call(v,A,C)){var w=C[s.valueField];var y=C[s.textField];var z=C[s.groupField];var B=s.finder.getEl(v,w).show();if(y.toLowerCase()==A.toLowerCase()){r.push(w);B.addClass("combobox-item-selected")}if(s.groupField&&D!=z){e("#"+u.groupIdPrefix+"_"+e.inArray(z,u.groups)).show();D=z}}}});d(v,r,true)}}function h(s){var p=e(s);var r=p.combobox("options");var o=p.combobox("panel");var q=o.children("div.combobox-item-hover");if(q.length){var v=r.finder.getRow(s,q);var n=v[r.valueField];if(r.multiple){if(q.hasClass("combobox-item-selected")){p.combobox("unselect",n)}else{p.combobox("select",n)}}else{p.combobox("select",n)}}var u=[];e.map(p.combobox("getValues"),function(t){if(j(s,t)>=0){u.push(t)}});p.combobox("setValues",u);if(!r.multiple){p.combobox("hidePanel")}}function c(p){var o=e.data(p,"combobox");var n=o.options;k++;o.itemIdPrefix="_easyui_combobox_i"+k;o.groupIdPrefix="_easyui_combobox_g"+k;e(p).addClass("combobox-f");e(p).combo(e.extend({},n,{onShowPanel:function(){e(p).combo("panel").find("div.combobox-item,div.combobox-group").show();f(p,e(p).combobox("getValue"));n.onShowPanel.call(p)}}));e(p).combo("panel").unbind().bind("mouseover",function(q){e(this).children("div.combobox-item-hover").removeClass("combobox-item-hover");var r=e(q.target).closest("div.combobox-item");if(!r.hasClass("combobox-item-disabled")){r.addClass("combobox-item-hover")}q.stopPropagation()}).bind("mouseout",function(q){e(q.target).closest("div.combobox-item").removeClass("combobox-item-hover");q.stopPropagation()}).bind("click",function(r){var t=e(r.target).closest("div.combobox-item");if(!t.length||t.hasClass("combobox-item-disabled")){return}var s=n.finder.getRow(p,t);if(!s){return}var q=s[n.valueField];if(n.multiple){if(t.hasClass("combobox-item-selected")){b(p,q)}else{a(p,q)}}else{a(p,q);e(p).combo("hidePanel")}r.stopPropagation()})}e.fn.combobox=function(o,n){if(typeof o=="string"){var p=e.fn.combobox.methods[o];if(p){return p(this,n)}else{return this.combo(o,n)}}o=o||{};return this.each(function(){var r=e.data(this,"combobox");if(r){e.extend(r.options,o);c(this)}else{r=e.data(this,"combobox",{options:e.extend({},e.fn.combobox.defaults,e.fn.combobox.parseOptions(this),o),data:[]});c(this);var q=e.fn.combobox.parseData(this);if(q.length){m(this,q)}}if(r.options.data){m(this,r.options.data)}l(this)})};e.fn.combobox.methods={options:function(o){var n=o.combo("options");return e.extend(e.data(o[0],"combobox").options,{originalValue:n.originalValue,disabled:n.disabled,readonly:n.readonly})},getData:function(n){return e.data(n[0],"combobox").data},setValues:function(o,n){return o.each(function(){d(this,n)})},setValue:function(o,n){return o.each(function(){d(this,[n])})},clear:function(n){return n.each(function(){e(this).combo("clear");var o=e(this).combo("panel");o.find("div.combobox-item-selected").removeClass("combobox-item-selected")})},reset:function(n){return n.each(function(){var o=e(this).combobox("options");if(o.multiple){e(this).combobox("setValues",o.originalValue)}else{e(this).combobox("setValue",o.originalValue)}})},loadData:function(o,n){return o.each(function(){m(this,n)})},reload:function(o,n){return o.each(function(){l(this,n)})},select:function(o,n){return o.each(function(){a(this,n)})},unselect:function(o,n){return o.each(function(){b(this,n)})}};e.fn.combobox.parseOptions=function(n){var o=e(n);return e.extend({},e.fn.combo.parseOptions(n),e.parser.parseOptions(n,["valueField","textField","groupField","mode","method","url"]))};e.fn.combobox.parseData=function(n){var q=[];var p=e(n).combobox("options");e(n).children().each(function(){if(this.tagName.toLowerCase()=="optgroup"){var r=e(this).attr("label");e(this).children().each(function(){o(this,r)})}else{o(this)}});return q;function o(u,r){var s=e(u);var v={};v[p.valueField]=s.attr("value")!=undefined?s.attr("value"):s.text();v[p.textField]=s.text();v.selected=s.is(":selected");v.disabled=s.is(":disabled");if(r){p.groupField=p.groupField||"group";v[p.groupField]=r}q.push(v)}};e.fn.combobox.defaults=e.extend({},e.fn.combo.defaults,{valueField:"value",textField:"text",groupField:null,groupFormatter:function(n){return n},mode:"local",method:"post",url:null,data:null,keyHandler:{up:function(n){g(this,"prev");n.preventDefault()},down:function(n){g(this,"next");n.preventDefault()},left:function(n){},right:function(n){},enter:function(n){h(this)},query:function(n,o){i(this,n)}},filter:function(n,p){var o=e(this).combobox("options");return p[o.textField].toLowerCase().indexOf(n.toLowerCase())==0},formatter:function(o){var n=e(this).combobox("options");return o[n.textField]},loader:function(q,p,o){var n=e(this).combobox("options");if(!n.url){return false}e.ajax({type:n.method,url:n.url,data:q,dataType:"json",success:function(r){p(r)},error:function(){o.apply(this,arguments)}})},loadFilter:function(n){return n},finder:{getEl:function(p,o){var n=j(p,o);var q=e.data(p,"combobox").itemIdPrefix+"_"+n;return e("#"+q)},getRow:function(n,r){var q=e.data(n,"combobox");var o=(r instanceof jQuery)?r.attr("id").substr(q.itemIdPrefix.length+1):j(n,r);return q.data[parseInt(o)]}},onBeforeLoad:function(n){},onLoadSuccess:function(){},onLoadError:function(){},onSelect:function(n){},onUnselect:function(n){}})})(jQuery);