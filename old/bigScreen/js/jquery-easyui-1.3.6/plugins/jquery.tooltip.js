(function(d){function i(j){d(j).addClass("tooltip-f")}function h(k){var j=d.data(k,"tooltip").options;d(k).unbind(".tooltip").bind(j.showEvent+".tooltip",function(l){e(k,l)}).bind(j.hideEvent+".tooltip",function(l){b(k,l)}).bind("mousemove.tooltip",function(l){if(j.trackMouse){j.trackMouseX=l.pageX;j.trackMouseY=l.pageY;g(k)}})}function f(k){var j=d.data(k,"tooltip");if(j.showTimer){clearTimeout(j.showTimer);j.showTimer=null}if(j.hideTimer){clearTimeout(j.hideTimer);j.hideTimer=null}}function g(o){var m=d.data(o,"tooltip");if(!m||!m.tip){return}var l=m.options;var k=m.tip;if(l.trackMouse){n=d();var j=l.trackMouseX+l.deltaX;var p=l.trackMouseY+l.deltaY}else{var n=d(o);var j=n.offset().left+l.deltaX;var p=n.offset().top+l.deltaY}switch(l.position){case"right":j+=n._outerWidth()+12+(l.trackMouse?12:0);p-=(k._outerHeight()-n._outerHeight())/2;break;case"left":j-=k._outerWidth()+12+(l.trackMouse?12:0);p-=(k._outerHeight()-n._outerHeight())/2;break;case"top":j-=(k._outerWidth()-n._outerWidth())/2;p-=k._outerHeight()+12+(l.trackMouse?12:0);break;case"bottom":j-=(k._outerWidth()-n._outerWidth())/2;p+=n._outerHeight()+12+(l.trackMouse?12:0);break}if(!d(o).is(":visible")){j=-100000;p=-100000}k.css({left:j,top:p,zIndex:(l.zIndex!=undefined?l.zIndex:(d.fn.window?d.fn.window.defaults.zIndex++:""))});l.onPosition.call(o,j,p)}function e(n,m){var l=d.data(n,"tooltip");var k=l.options;var j=l.tip;if(!j){j=d('<div tabindex="-1" class="tooltip"><div class="tooltip-content"></div><div class="tooltip-arrow-outer"></div><div class="tooltip-arrow"></div></div>').appendTo("body");l.tip=j;c(n)}j.removeClass("tooltip-top tooltip-bottom tooltip-left tooltip-right").addClass("tooltip-"+k.position);f(n);l.showTimer=setTimeout(function(){g(n);j.show();k.onShow.call(n,m);var p=j.children(".tooltip-arrow-outer");var o=j.children(".tooltip-arrow");var q="border-"+k.position+"-color";p.add(o).css({borderTopColor:"",borderBottomColor:"",borderLeftColor:"",borderRightColor:""});p.css(q,j.css(q));o.css(q,j.css("backgroundColor"))},k.showDelay)}function b(k,l){var j=d.data(k,"tooltip");if(j&&j.tip){f(k);j.hideTimer=setTimeout(function(){j.tip.hide();j.options.onHide.call(k,l)},j.options.hideDelay)}}function c(m,l){var k=d.data(m,"tooltip");var j=k.options;if(l){j.content=l}if(!k.tip){return}var n=typeof j.content=="function"?j.content.call(m):j.content;k.tip.children(".tooltip-content").html(n);j.onUpdate.call(m,n)}function a(k){var l=d.data(k,"tooltip");if(l){f(k);var j=l.options;if(l.tip){l.tip.remove()}if(j._title){d(k).attr("title",j._title)}d.removeData(k,"tooltip");d(k).unbind(".tooltip").removeClass("tooltip-f");j.onDestroy.call(k)}}d.fn.tooltip=function(k,j){if(typeof k=="string"){return d.fn.tooltip.methods[k](this,j)}k=k||{};return this.each(function(){var l=d.data(this,"tooltip");if(l){d.extend(l.options,k)}else{d.data(this,"tooltip",{options:d.extend({},d.fn.tooltip.defaults,d.fn.tooltip.parseOptions(this),k)});i(this)}h(this);c(this)})};d.fn.tooltip.methods={options:function(j){return d.data(j[0],"tooltip").options},tip:function(j){return d.data(j[0],"tooltip").tip},arrow:function(j){return j.tooltip("tip").children(".tooltip-arrow-outer,.tooltip-arrow")},show:function(k,j){return k.each(function(){e(this,j)})},hide:function(k,j){return k.each(function(){b(this,j)})},update:function(k,j){return k.each(function(){c(this,j)})},reposition:function(j){return j.each(function(){g(this)})},destroy:function(j){return j.each(function(){a(this)})}};d.fn.tooltip.parseOptions=function(l){var j=d(l);var k=d.extend({},d.parser.parseOptions(l,["position","showEvent","hideEvent","content",{deltaX:"number",deltaY:"number",showDelay:"number",hideDelay:"number"}]),{_title:j.attr("title")});j.attr("title","");if(!k.content){k.content=k._title}return k};d.fn.tooltip.defaults={position:"bottom",content:null,trackMouse:false,deltaX:0,deltaY:0,showEvent:"mouseenter",hideEvent:"mouseleave",showDelay:200,hideDelay:100,onShow:function(j){},onHide:function(j){},onUpdate:function(j){},onPosition:function(j,k){},onDestroy:function(){}}})(jQuery);