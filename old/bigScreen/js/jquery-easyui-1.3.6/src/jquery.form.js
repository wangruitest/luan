(function(g){function f(r,x){x=x||{};var l={};if(x.onSubmit){if(x.onSubmit.call(r,l)==false){return}}var i=g(r);if(x.url){i.attr("action",x.url)}var s="easyui_frame_"+(new Date().getTime());var j=g("<iframe id="+s+" name="+s+"></iframe>").attr("src",window.ActiveXObject?"javascript:false":"about:blank").css({position:"absolute",top:-1000,left:-1000});var w=i.attr("target"),u=i.attr("action");i.attr("target",s);var o=g();try{j.appendTo("body");j.bind("load",m);for(var k in l){var q=g('<input type="hidden" name="'+k+'">').val(l[k]).appendTo(i);o=o.add(q)}v();i[0].submit()}finally{i.attr("action",u);w?i.attr("target",w):i.removeAttr("target");o.remove()}function v(){var t=g("#"+s);if(!t.length){return}try{var n=t.contents()[0].readyState;if(n&&n.toLowerCase()=="uninitialized"){setTimeout(v,100)}}catch(y){m()}}var p=10;function m(){var B=g("#"+s);if(!B.length){return}B.unbind();var y="";try{var n=B.contents().find("body");y=n.html();if(y==""){if(--p){setTimeout(m,100);return}}var t=n.find(">textarea");if(t.length){y=t.val()}else{var A=n.find(">pre");if(A.length){y=A.html()}}}catch(z){}if(x.success){x.success(y)}setTimeout(function(){B.unbind();B.remove()},100)}}function e(o,m){if(!g.data(o,"form")){g.data(o,"form",{options:g.extend({},g.fn.form.defaults)})}var l=g.data(o,"form").options;if(typeof m=="string"){var p={};if(l.onBeforeLoad.call(o,p)==false){return}g.ajax({url:m,data:p,dataType:"json",success:function(q){k(q)},error:function(){l.onLoadError.apply(o,arguments)}})}else{k(m)}function k(u){var t=g(o);for(var r in u){var v=u[r];var q=j(r,v);if(!q.length){var s=i(r,v);if(!s){g('input[name="'+r+'"]',t).val(v);g('textarea[name="'+r+'"]',t).val(v);g('select[name="'+r+'"]',t).val(v)}}n(r,v)}l.onLoadSuccess.call(o,u);h(o)}function j(r,s){var q=g(o).find('input[name="'+r+'"][type=radio], input[name="'+r+'"][type=checkbox]');q._propAttr("checked",false);q.each(function(){var t=g(this);if(t.val()==String(s)||g.inArray(t.val(),g.isArray(s)?s:[s])>=0){t._propAttr("checked",true)}});return q}function i(r,w){var t=0;var q=["numberbox","slider"];for(var s=0;s<q.length;s++){var v=q[s];var u=g(o).find("input["+v+'Name="'+r+'"]');if(u.length){u[v]("setValue",w);t+=u.length}}return t}function n(q,u){var t=g(o);var w=["combobox","combotree","combogrid","datetimebox","datebox","combo"];var v=t.find('[comboName="'+q+'"]');if(v.length){for(var r=0;r<w.length;r++){var s=w[r];if(v.hasClass(s+"-f")){if(v[s]("options").multiple){v[s]("setValues",u)}else{v[s]("setValue",u)}return}}}}}function b(o){g("input,select,textarea",o).each(function(){var q=this.type,i=this.tagName.toLowerCase();if(q=="text"||q=="hidden"||q=="password"||i=="textarea"){this.value=""}else{if(q=="file"){var p=g(this);var r=p.clone().val("");r.insertAfter(p);if(p.data("validatebox")){p.validatebox("destroy");r.validatebox()}else{p.remove()}}else{if(q=="checkbox"||q=="radio"){this.checked=false}else{if(i=="select"){this.selectedIndex=-1}}}}});var l=g(o);var j=["combo","combobox","combotree","combogrid","slider"];for(var k=0;k<j.length;k++){var n=j[k];var m=l.find("."+n+"-f");if(m.length&&m[n]){m[n]("clear")}}h(o)}function d(o){o.reset();var l=g(o);var j=["combo","combobox","combotree","combogrid","datebox","datetimebox","spinner","timespinner","numberbox","numberspinner","slider"];for(var k=0;k<j.length;k++){var n=j[k];var m=l.find("."+n+"-f");if(m.length&&m[n]){m[n]("reset")}}h(o)}function a(k){var i=g.data(k,"form").options;var j=g(k);j.unbind(".form").bind("submit.form",function(){setTimeout(function(){f(k,i)},0);return false})}function h(j){if(g.fn.validatebox){var i=g(j);i.find(".validatebox-text:not(:disabled)").validatebox("validate");var k=i.find(".validatebox-invalid");k.filter(":not(:disabled):first").focus();return k.length==0}return true}function c(j,i){g(j).find(".validatebox-text:not(:disabled)").validatebox(i?"disableValidation":"enableValidation")}g.fn.form=function(i,j){if(typeof i=="string"){return g.fn.form.methods[i](this,j)}i=i||{};return this.each(function(){if(!g.data(this,"form")){g.data(this,"form",{options:g.extend({},g.fn.form.defaults,i)})}a(this)})};g.fn.form.methods={submit:function(j,i){return j.each(function(){var k=g.extend({},g.fn.form.defaults,g.data(this,"form")?g.data(this,"form").options:{},i||{});f(this,k)})},load:function(j,i){return j.each(function(){e(this,i)})},clear:function(i){return i.each(function(){b(this)})},reset:function(i){return i.each(function(){d(this)})},validate:function(i){return h(i[0])},disableValidation:function(i){return i.each(function(){c(this,true)})},enableValidation:function(i){return i.each(function(){c(this,false)})}};g.fn.form.defaults={url:null,onSubmit:function(i){return g(this).form("validate")},success:function(i){},onBeforeLoad:function(i){},onLoadSuccess:function(i){},onLoadError:function(){}}})(jQuery);