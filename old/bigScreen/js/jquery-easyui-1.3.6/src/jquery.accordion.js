(function(e){function f(s){var r=e.data(s,"accordion");var q=r.options;var w=r.panels;var u=e(s);q.fit?e.extend(q,u._fit()):u._fit(false);if(!isNaN(q.width)){u._outerWidth(q.width)}else{u.css("width","")}var v=0;var y="auto";var t=u.find(">div.panel>div.accordion-header");if(t.length){v=e(t[0]).css("height","")._outerHeight()}if(!isNaN(q.height)){u._outerHeight(q.height);y=u.height()-v*t.length}else{u.css("height","")}x(true,y-x(false)+1);function x(D,z){var B=0;for(var A=0;A<w.length;A++){var F=w[A];var C=F.panel("header")._outerHeight(v);if(F.panel("options").collapsible==D){var E=isNaN(z)?undefined:(z+v*C.length);F.panel("resize",{width:u.width(),height:(D?E:undefined)});B+=F.panel("panel").outerHeight()-v}}return B}}function o(r,w,v,u){var s=e.data(r,"accordion").panels;var q=[];for(var t=0;t<s.length;t++){var x=s[t];if(w){if(x.panel("options")[w]==v){q.push(x)}}else{if(x[0]==e(v)[0]){return t}}}if(w){return u?q:(q.length?q[0]:null)}else{return -1}}function h(q){return o(q,"collapsed",false,true)}function k(r){var q=h(r);return q.length?q[0]:null}function p(r,q){return o(r,null,q)}function g(q,s){var r=e.data(q,"accordion").panels;if(typeof s=="number"){if(s<0||s>=r.length){return null}else{return r[s]}}return o(q,"title",s)}function c(q){var r=e.data(q,"accordion").options;var s=e(q);if(r.border){s.removeClass("accordion-noborder")}else{s.addClass("accordion-noborder")}}function n(q){var r=e.data(q,"accordion");var s=e(q);s.addClass("accordion");r.panels=[];s.children("div").each(function(){var u=e.extend({},e.parser.parseOptions(this),{selected:(e(this).attr("selected")?true:undefined)});var t=e(this);r.panels.push(t);j(q,t,u)});s.bind("_resize",function(v,u){var t=e.data(q,"accordion").options;if(t.fit==true||u){f(q)}return false})}function j(r,q,u){var w=e.data(r,"accordion").options;q.panel(e.extend({},{collapsible:true,minimizable:false,maximizable:false,closable:false,doSize:false,collapsed:true,headerCls:"accordion-header",bodyCls:"accordion-body"},u,{onBeforeExpand:function(){if(u.onBeforeExpand){if(u.onBeforeExpand.call(this)==false){return false}}if(!w.multiple){var y=e.grep(h(r),function(A){return A.panel("options").collapsible});for(var t=0;t<y.length;t++){a(r,p(r,y[t]))}}var z=e(this).panel("header");z.addClass("accordion-header-selected");z.find(".accordion-collapse").removeClass("accordion-expand")},onExpand:function(){if(u.onExpand){u.onExpand.call(this)}w.onSelect.call(r,e(this).panel("options").title,p(r,this))},onBeforeCollapse:function(){if(u.onBeforeCollapse){if(u.onBeforeCollapse.call(this)==false){return false}}var t=e(this).panel("header");t.removeClass("accordion-header-selected");t.find(".accordion-collapse").addClass("accordion-expand")},onCollapse:function(){if(u.onCollapse){u.onCollapse.call(this)}w.onUnselect.call(r,e(this).panel("options").title,p(r,this))}}));var x=q.panel("header");var s=x.children("div.panel-tool");s.children("a.panel-tool-collapse").hide();var v=e('<a href="javascript:void(0)"></a>').addClass("accordion-collapse accordion-expand").appendTo(s);v.bind("click",function(){var t=p(r,q);if(q.panel("options").collapsed){i(r,t)}else{a(r,t)}return false});q.panel("options").collapsible?v.show():v.hide();x.click(function(){e(this).find("a.accordion-collapse:visible").triggerHandler("click");return false})}function i(q,t){var s=g(q,t);if(!s){return}b(q);var r=e.data(q,"accordion").options;s.panel("expand",r.animate)}function a(q,t){var s=g(q,t);if(!s){return}b(q);var r=e.data(q,"accordion").options;s.panel("collapse",r.animate)}function m(q){var s=e.data(q,"accordion").options;var t=o(q,"selected",true);if(t){r(p(q,t))}else{r(s.selected)}function r(v){var u=s.animate;s.animate=false;i(q,v);s.animate=u}}function b(q){var r=e.data(q,"accordion").panels;for(var s=0;s<r.length;s++){r[s].stop(true,true)}}function l(r,t){var v=e.data(r,"accordion");var u=v.options;var s=v.panels;if(t.selected==undefined){t.selected=true}b(r);var q=e("<div></div>").appendTo(r);s.push(q);j(r,q,t);f(r);u.onAdd.call(r,t.title,s.length-1);if(t.selected){i(r,s.length-1)}}function d(t,u){var s=e.data(t,"accordion");var q=s.options;var w=s.panels;b(t);var r=g(t,u);var x=r.panel("options").title;var v=p(t,r);if(!r){return}if(q.onBeforeRemove.call(t,x,v)==false){return}w.splice(v,1);r.panel("destroy");if(w.length){f(t);var y=k(t);if(!y){i(t,0)}}q.onRemove.call(t,x,v)}e.fn.accordion=function(q,r){if(typeof q=="string"){return e.fn.accordion.methods[q](this,r)}q=q||{};return this.each(function(){var s=e.data(this,"accordion");if(s){e.extend(s.options,q)}else{e.data(this,"accordion",{options:e.extend({},e.fn.accordion.defaults,e.fn.accordion.parseOptions(this),q),accordion:e(this).addClass("accordion"),panels:[]});n(this)}c(this);f(this);m(this)})};e.fn.accordion.methods={options:function(q){return e.data(q[0],"accordion").options},panels:function(q){return e.data(q[0],"accordion").panels},resize:function(q){return q.each(function(){f(this)})},getSelections:function(q){return h(q[0])},getSelected:function(q){return k(q[0])},getPanel:function(r,q){return g(r[0],q)},getPanelIndex:function(r,q){return p(r[0],q)},select:function(r,q){return r.each(function(){i(this,q)})},unselect:function(r,q){return r.each(function(){a(this,q)})},add:function(r,q){return r.each(function(){l(this,q)})},remove:function(r,q){return r.each(function(){d(this,q)})}};e.fn.accordion.parseOptions=function(r){var q=e(r);return e.extend({},e.parser.parseOptions(r,["width","height",{fit:"boolean",border:"boolean",animate:"boolean",multiple:"boolean",selected:"number"}]))};e.fn.accordion.defaults={width:"auto",height:"auto",fit:false,border:true,animate:true,multiple:false,selected:0,onSelect:function(r,q){},onUnselect:function(r,q){},onAdd:function(r,q){},onBeforeRemove:function(r,q){},onRemove:function(r,q){}}})(jQuery);