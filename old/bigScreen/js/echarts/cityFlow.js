var ProAndCitySelect=" ";var BothSelect=" ";var TimeSelect=" ";var Choose=" ";var arr1=[];var arr2=[];var arr3=[];var arr4=[];var arr5=[];var arr6=[];$.ajax({type:"post",async:false,url:"cityFlow/getStatDayForxAxis.html",data:{ProAndCitySelect:ProAndCitySelect,BothSelect:BothSelect,TimeSelect:TimeSelect,Choose:Choose},dataType:"json",success:function(a){if(a){for(var b=0;b<a.length;b++){console.log(a[b].statday);arr1.push(a[b].statday);arr2.push(a[b].sumtourists);arr3.push(a[b].sumcitycount)}initMyCharts(arr1,arr2,arr3)}},error:function(a){alert("图表请求数据失败啦!");myChart.hideLoading()}});function initMyCharts(d,c,b){var e=echarts.init(document.getElementById("citymain"),"macarons");var a={title:{text:""},tooltip:{trigger:"axis"},legend:{data:[]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:true},xAxis:[{type:"category",boundaryGap:false,data:d}],yAxis:[{type:"value"}],series:[{name:"游客",type:"line",areaStyle:{normal:{}},data:b},{name:"旅客",type:"line",areaStyle:{normal:{}},data:c}]};e.setOption(a)}$(".saiDataList").click(function(){var b=$(this).text();var a=[];if(b=="游客"){initMyCharts(arr1,arr3,a)}else{if(b=="旅客"){initMyCharts(arr1,a,arr2)}}});$.ajax({type:"post",async:false,url:"cityFlow/getStayDayForBar.html",data:{ProAndCitySelect:ProAndCitySelect,BothSelect:BothSelect,TimeSelect:TimeSelect,Choose:Choose},dataType:"json",success:function(d){if(d){console.log(d.length);var e=0,c=0;for(var f=1;f<d.length;f++){console.log(f);if(f<6){arr6.push(d[f].statday);arr4.push(d[f].sumtourists);arr5.push(d[f].sumcitycount)}else{e+=d[f].sumtourists;c+=d[f].sumcitycount;console.log(c)}}arr4.push(e);arr5.push(c);console.log(arr4);console.log(arr5);initMyCharts2(arr4,arr5,arr6)}},error:function(a){alert("图表请求数据失败啦!")}});function initMyCharts2(a,e,d){var c=echarts.init(document.getElementById("daymain"),"macarons");var b={title:{text:"",subtext:""},tooltip:{trigger:"axis"},legend:{data:["省内","省外"]},calculable:true,xAxis:[{type:"category",data:["1日","2日","3日","4日","5日","多日"]}],yAxis:[{type:"value"}],series:[{name:"省内",type:"bar",data:a,},{name:"省外",type:"bar",data:e,}]};c.setOption(b)}$(".timeDataList").click(function(){var a=$(this).text();if(a=="近一个月"){initMyCharts2(arr4,arr5,arr6)}else{if(a=="近一个季度"){initMyCharts2(arr4,arr5,arr6)}else{if(a=="近半年"){initMyCharts2(arr4,arr5,arr6)}}}$(".timeText").html($(this).text())});