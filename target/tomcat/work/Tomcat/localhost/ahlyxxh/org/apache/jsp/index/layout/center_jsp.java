/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.37
 * Generated at: 2019-05-22 15:17:21 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.index.layout;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class center_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("\t$(function() {\r\n");
      out.write("\t\t$('#layout_center_tabsMenu').menu({\r\n");
      out.write("\t\t\tonClick : function(item) {\r\n");
      out.write("\t\t\t\tvar curTabTitle = $(this).data('tabTitle');\r\n");
      out.write("\t\t\t\tvar type = $(item.target).attr('type');\r\n");
      out.write("\r\n");
      out.write("\t\t\t\tif (type === 'refresh') {\r\n");
      out.write("\t\t\t\t\tlayout_center_refreshTab(curTabTitle);\r\n");
      out.write("\t\t\t\t\treturn;\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\r\n");
      out.write("\t\t\t\tif (type === 'close') {\r\n");
      out.write("\t\t\t\t\tvar t = $('#layout_center_tabs').tabs('getTab', curTabTitle);\r\n");
      out.write("\t\t\t\t\tif (t.panel('options').closable) {\r\n");
      out.write("\t\t\t\t\t\t$('#layout_center_tabs').tabs('close', curTabTitle);\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\treturn;\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\r\n");
      out.write("\t\t\t\tvar allTabs = $('#layout_center_tabs').tabs('tabs');\r\n");
      out.write("\t\t\t\tvar closeTabsTitle = [];\r\n");
      out.write("\r\n");
      out.write("\t\t\t\t$.each(allTabs, function() {\r\n");
      out.write("\t\t\t\t\tvar opt = $(this).panel('options');\r\n");
      out.write("\t\t\t\t\tif (opt.closable && opt.title != curTabTitle && type === 'closeOther') {\r\n");
      out.write("\t\t\t\t\t\tcloseTabsTitle.push(opt.title);\r\n");
      out.write("\t\t\t\t\t} else if (opt.closable && type === 'closeAll') {\r\n");
      out.write("\t\t\t\t\t\tcloseTabsTitle.push(opt.title);\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t});\r\n");
      out.write("\r\n");
      out.write("\t\t\t\tfor ( var i = 0; i < closeTabsTitle.length; i++) {\r\n");
      out.write("\t\t\t\t\t$('#layout_center_tabs').tabs('close', closeTabsTitle[i]);\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t});\r\n");
      out.write("\t\t//加载不同商户的内容\r\n");
      out.write("\t\tloadLogo();\r\n");
      out.write("\t\t\r\n");
      out.write("\t\t$('#layout_center_tabs').tabs({\r\n");
      out.write("\t\t\tfit : true,\r\n");
      out.write("\t\t\tborder : false,\r\n");
      out.write("\t\t\tonContextMenu : function(e, title) {\r\n");
      out.write("\t\t\t\te.preventDefault();\r\n");
      out.write("\t\t\t\t$('#layout_center_tabsMenu').menu('show', {\r\n");
      out.write("\t\t\t\t\tleft : e.pageX,\r\n");
      out.write("\t\t\t\t\ttop : e.pageY\r\n");
      out.write("\t\t\t\t}).data('tabTitle', title);\r\n");
      out.write("\t\t\t},\r\n");
      out.write("\t\t\ttools : [ {\r\n");
      out.write("\t\t\t\ticonCls : 'icon-reload',\r\n");
      out.write("\t\t\t\thandler : function() {\r\n");
      out.write("\t\t\t\t\tvar href = $('#layout_center_tabs').tabs('getSelected').panel('options').href;\r\n");
      out.write("\t\t\t\t\tif (href) {/*说明tab是以href方式引入的目标页面*/\r\n");
      out.write("\t\t\t\t\t\tvar index = $('#layout_center_tabs').tabs('getTabIndex', $('#layout_center_tabs').tabs('getSelected'));\r\n");
      out.write("\t\t\t\t\t\t$('#layout_center_tabs').tabs('getTab', index).panel('refresh');\r\n");
      out.write("\t\t\t\t\t} else {/*说明tab是以content方式引入的目标页面*/\r\n");
      out.write("\t\t\t\t\t\tvar panel = $('#layout_center_tabs').tabs('getSelected').panel('panel');\r\n");
      out.write("\t\t\t\t\t\tvar frame = panel.find('iframe');\r\n");
      out.write("\t\t\t\t\t\ttry {\r\n");
      out.write("\t\t\t\t\t\t\tif (frame.length > 0) {\r\n");
      out.write("\t\t\t\t\t\t\t\tfor ( var i = 0; i < frame.length; i++) {\r\n");
      out.write("\t\t\t\t\t\t\t\t\tframe[i].contentWindow.document.write('');\r\n");
      out.write("\t\t\t\t\t\t\t\t\tframe[i].contentWindow.close();\r\n");
      out.write("\t\t\t\t\t\t\t\t\tframe[i].src = frame[i].src;\r\n");
      out.write("\t\t\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t\t\tif ($.browser.msie) {\r\n");
      out.write("\t\t\t\t\t\t\t\t\tCollectGarbage();\r\n");
      out.write("\t\t\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t} catch (e) {\r\n");
      out.write("\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t}, {\r\n");
      out.write("\t\t\t\ticonCls : 'icon-cancel',\r\n");
      out.write("\t\t\t\thandler : function() {\r\n");
      out.write("\t\t\t\t\tvar index = $('#layout_center_tabs').tabs('getTabIndex', $('#layout_center_tabs').tabs('getSelected'));\r\n");
      out.write("\t\t\t\t\tvar tab = $('#layout_center_tabs').tabs('getTab', index);\r\n");
      out.write("\t\t\t\t\tif (tab.panel('options').closable) {\r\n");
      out.write("\t\t\t\t\t\t$('#layout_center_tabs').tabs('close', index);\r\n");
      out.write("\t\t\t\t\t} else {\r\n");
      out.write("\t\t\t\t\t\t$.messager.alert('提示', '[' + tab.panel('options').title + ']不可以被关闭', 'error');\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t} ]\r\n");
      out.write("\t\t});\r\n");
      out.write("\t\r\n");
      out.write("\t});\r\n");
      out.write("\r\n");
      out.write("\tfunction layout_center_refreshTab(title) {\r\n");
      out.write("\t\t$('#layout_center_tabs').tabs('getTab', title).panel('refresh');\r\n");
      out.write("\t}\r\n");
      out.write("\r\n");
      out.write("\tfunction layout_center_addTabFun(opts) {\r\n");
      out.write("\t\tif(!opts.content){\r\n");
      out.write("\t\t\tvar height = document.documentElement.clientHeight-138;\r\n");
      out.write("\t\t\tvar href=\"");
      out.print(request.getContextPath() );
      out.write("\"+opts.href;\r\n");
      out.write("\t\t\tvar content=\"<iframe align=\\\"center\\\" style=\\\"width:100%;height:\"+height+\"px;\\\" frameborder=\\\"0\\\" id=\\\"module\\\" name=\\\"module\\\" scrolling=\\\"auto\\\" src=\\\"\"+href+\"\\\"></iframe>\";\r\n");
      out.write("\t\t\topts.href=\"\";\r\n");
      out.write("\t\t\topts.content=content;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\t\r\n");
      out.write("\t\tvar t = $('#layout_center_tabs');\r\n");
      out.write("\t\tif (t.tabs('exists', opts.title)) {\r\n");
      out.write("\t\t\tt.tabs('select', opts.title);\r\n");
      out.write("\t\t} else {\r\n");
      out.write("\t\t\tt.tabs('add', opts);\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\tfunction loadLogo(){\r\n");
      out.write("\t\tDWREngine.setAsync(false);\r\n");
      out.write("\t\tvar normalHomePage=\"\";\r\n");
      out.write("\t\t WebLogoCfgAction.getWebLogoCfg(function(data){\r\n");
      out.write("\t\t    \tif(data.returnList == null || data.returnList.length<=0){\r\n");
      out.write("\t\t    \t\tnormalHomePage=\"index/homepage/normal.jsp\";\r\n");
      out.write("\t\t    \t\t$(\"#top_logo\").attr(\"src\",\"../images/newLogin/top_05.jpg\");\t\r\n");
      out.write("\t\t    \t} else{\r\n");
      out.write("\t\t    \t\tvar logoCfg =data.returnList[0];\r\n");
      out.write("\t\t    \t\tif(logoCfg.ext2==\"1\"){\r\n");
      out.write("\t\t    \t\tnormalHomePage=\"index/homepage/normal.jsp\";\r\n");
      out.write("\t\t    \t\t$(\"#top_logo\").attr(\"src\",\"../images/newLogin/top_05.jpg\");\t\r\n");
      out.write("\t\t        \t}else if(logoCfg.ext3==\"341722\"){\r\n");
      out.write("\t\t        \t\tnormalHomePage=\"index/homepage/shitainormal.jsp\";\r\n");
      out.write("\t\t    \t\t\t$(\"#top_logo\").attr(\"src\",\"../images/newLogin/top_05_3.jpg\");\t\r\n");
      out.write("\t\t        \t}else{\r\n");
      out.write("\t\t    \t\tnormalHomePage=\"index/homepage/luannormal.jsp\";\r\n");
      out.write("\t\t    \t\t$(\"#top_logo\").attr(\"src\",\"../images/newLogin/top_05_2.jpg\");\t\r\n");
      out.write("\t\t        \t}\r\n");
      out.write("\t\t    \t}\r\n");
      out.write("\t\t    \t\r\n");
      out.write("\t\t    });\r\n");
      out.write("\t\t//加载商户配置\r\n");
      out.write("\t\tUtilsAction.getBusinessFromUser(function(data){\r\n");
      out.write("\t\t\tif(null!=data){\r\n");
      out.write("\t\t\t\t\r\n");
      out.write("\t\t\t\t$.cookie('userType','bussiness', { path: '/', expires: 1 });\r\n");
      out.write("\t\t\t\tif(null!=data.logoSrc && data.logoSrc!=\"\"){\r\n");
      out.write("\t\t\t\t\t$(\"#top_logo\").attr(\"src\",\"../\"+data.logoSrc);\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t});\r\n");
      out.write("\t\tif(null!=roleHomepageUrl && roleHomepageUrl!=\"\" && roleHomepageUrl!=\"null\"){\r\n");
      out.write("\t\t\tnormalHomePage=roleHomepageUrl;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tnormalHomePage=normalHomePage.replaceAll(\"\\\\\\\\\", \"\\/\");\r\n");
      out.write("\t\t//加载首页内容：\r\n");
      out.write("\t\tvar homePageHtml=\"<div title=\\\"首页\\\" data-options=\\\"href:'../\"+normalHomePage+\"'\\\"></div>\";\r\n");
      out.write("\t\t$(\"#layout_center_tabs\").append(homePageHtml);\r\n");
      out.write("\t\tDWREngine.setAsync(true);\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("</script>\r\n");
      out.write("<div id=\"layout_center_tabs\" style=\"overflow: hidden;\">\r\n");
      out.write("\t \r\n");
      out.write("\t <!--\r\n");
      out.write("\t<div title=\"首页\" data-options=\"href:'homepage/normal.jsp'\"></div>\r\n");
      out.write("\t<div title=\"首页\" data-options=\"href:'layout/portal.jsp'\"></div>\r\n");
      out.write("\t-->\r\n");
      out.write("</div>\r\n");
      out.write("<div id=\"layout_center_tabsMenu\" style=\"width: 120px;display:none;height:180px;\">\r\n");
      out.write("<!-- <div type=\"refresh\">刷新</div>-->\r\n");
      out.write("\t<div class=\"menu-sep\"></div>\r\n");
      out.write("\t<div type=\"close\">关闭</div>\r\n");
      out.write("\t<div type=\"closeOther\">关闭其他</div>\r\n");
      out.write("\t<div type=\"closeAll\">关闭所有</div>\r\n");
      out.write("</div>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try { out.clearBuffer(); } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
