/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.37
 * Generated at: 2017-06-09 01:53:08 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.jsp.business;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class UserBusinessSelect_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=utf-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write('\r');
      out.write('\n');

	request.setAttribute("home", request.getContextPath());

      out.write("\r\n");
      out.write("<script type='text/javascript' src='");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${home}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/dwr/interface/SysRoleAction.js'></script>\r\n");
      out.write("<script type='text/javascript' src='");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${home}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/dwr/interface/SysOperatorAction.js'></script>\r\n");
      out.write("<script>\r\n");
      out.write("\t/**\r\n");
      out.write("\t * 通用选择框：选择系统人员、系统角色\r\n");
      out.write("\t * 调用方式：\r\n");
      out.write("\t * 1.先在需要调用的页面中引入本页面\r\n");
      out.write("\t * 2.js调用 commonSelect(options,selectUsersBack);\r\n");
      out.write("\t                参数说明：\r\n");
      out.write("\t     (1)options={\r\n");
      out.write("\t\t        type: 数据类型---必填，其中  01-选择人员,02-选择角色\r\n");
      out.write("\t       \t\ttitle: 窗口标题---默认:'通用选择框',\r\n");
      out.write("\t   \t\t    width: 窗口宽度---默认:700,\r\n");
      out.write("\t   \t\t    height: 窗口高度---默认:700,\r\n");
      out.write("\t   \t\t    shadow: 窗口阴影---默认:true,\r\n");
      out.write("\t   \t\t    modal: 窗口模态---默认:true,\r\n");
      out.write("\t   \t\t    selectedData:[{已选对象1},{已选对象2}],已经选择的对象，显示在已选区\r\n");
      out.write("\t       }\r\n");
      out.write("\t     (2)selectUsersBack:为回调函数，接收选择完的数据对象列表，如：\r\n");
      out.write("\t     \tfunction selectUsersBack(result){\r\n");
      out.write("\t \t\t}\r\n");
      out.write("\t     \t其中result为对象列表，对象格式为：\r\n");
      out.write("\t     \tobj={\r\n");
      out.write("\t     \t\tunid:'标识',\r\n");
      out.write("\t     \t\tname:'文字'\r\n");
      out.write("\t     \t}\r\n");
      out.write("\t */\r\n");
      out.write("\t \r\n");
      out.write("\tvar commonSelectWin=null;\r\n");
      out.write("\t$(function(){\r\n");
      out.write("\t});\r\n");
      out.write("\t\r\n");
      out.write("\tfunction commonSelect(options,callback){\r\n");
      out.write("\t\tif(!checkOptions(options)){\r\n");
      out.write("\t\t\tshowMsg(\"调用[通用选择框]时，输入参数不对！请参考详细说明！\");\r\n");
      out.write("\t\t\treturn;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tif(null==callback){\r\n");
      out.write("\t\t\tshowMsg(\"无回调函数！无法打开[通用选择框]！\");\r\n");
      out.write("\t\t\treturn;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\t//创建编辑对话框\r\n");
      out.write("\t\t$('#commonSelectWin').removeAttr('style');\r\n");
      out.write("\t\tcommonSelectWin=$('#commonSelectWin').dialog({\r\n");
      out.write("\t\t\ttitle: options.title || '通用选择框',\r\n");
      out.write("\t\t    width: options.width || 700,\r\n");
      out.write("\t\t    height: options.height || 350,\r\n");
      out.write("\t\t    shadow: options.shadow || true,\r\n");
      out.write("\t\t    modal: options.modal || true,\r\n");
      out.write("\t\t\tbuttons:[{\r\n");
      out.write("\t\t\t\ttext:'确定',\r\n");
      out.write("\t\t\t\ticonCls:'icon-ok',\r\n");
      out.write("\t\t\t\thandler:function(){\r\n");
      out.write("\t\t\t\t\tcallback(getSelectedData());\r\n");
      out.write("\t\t\t\t\t$('#commonSelectWin').dialog('close');\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t},{\r\n");
      out.write("\t\t\t\ttext:'取消',\r\n");
      out.write("\t\t\t\thandler:function(){\r\n");
      out.write("\t\t\t\t\t$('#commonSelectWin').dialog('close');\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t}],\r\n");
      out.write("\t\t\tclosed:false\r\n");
      out.write("\t\t});\r\n");
      out.write("\t\t\r\n");
      out.write("\t\t//绑定按钮事件\r\n");
      out.write("\t\tinitBtnEvent();\r\n");
      out.write("\t\t\r\n");
      out.write("\t\t//加载数据\r\n");
      out.write("\t\tloadCommonSelectData(options);\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\tfunction checkOptions(options){\r\n");
      out.write("\t\tif(null==options)return false;\r\n");
      out.write("\t\tif(null==options.type)return false;\r\n");
      out.write("\t\treturn true;\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\tfunction initBtnEvent(){\r\n");
      out.write("\t\t$(\"#common_toSelect\").dblclick(commonSelectItemAdd);\r\n");
      out.write("\t\t$(\"#common_selected\").dblclick(commonSelectItemDel);\r\n");
      out.write("\t\t$(\"#common_select_add\").click(commonSelectItemAdd);\r\n");
      out.write("\t\t$(\"#common_select_del\").click(commonSelectItemDel);\r\n");
      out.write("\t\t$(\"#common_select_add_all\").click(commonSelectItemAddAll);\r\n");
      out.write("\t\t$(\"#common_select_del_all\").click(commonSelectItemDelAll);\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\tfunction commonSelectItemAdd(){\r\n");
      out.write("\t\tvar value=$(\"#common_toSelect\").find(\"option:selected\").val();\r\n");
      out.write("\t\tvar text=$(\"#common_toSelect\").find(\"option:selected\").text();\r\n");
      out.write("\t\tif(null==value || null==text)return;\r\n");
      out.write("\t\t$(\"#common_toSelect\").find(\"option:selected\").remove();\r\n");
      out.write("\t\t$(\"#common_selected\").append(\"<option value='\"+value+\"'>\"+text+\"</option>\");   \r\n");
      out.write("\t}\r\n");
      out.write("\tfunction commonSelectItemDel(){\r\n");
      out.write("\t\tvar value=$(\"#common_selected\").find(\"option:selected\").val();\r\n");
      out.write("\t\tvar text=$(\"#common_selected\").find(\"option:selected\").text();\r\n");
      out.write("\t\tif(null==value || null==text)return;\r\n");
      out.write("\t\t$(\"#common_selected\").find(\"option:selected\").remove();   \r\n");
      out.write("\t\t$(\"#common_toSelect\").append(\"<option value='\"+value+\"'>\"+text+\"</option>\");  \r\n");
      out.write("\t}\r\n");
      out.write("\tfunction commonSelectItemAddAll(){\r\n");
      out.write("\t\t$(\"#common_toSelect option\").each(function(){\r\n");
      out.write("\t\t\tvar value=$(this).val();\r\n");
      out.write("\t\t\tvar text=$(this).text();\r\n");
      out.write("\t\t\t$(\"#common_selected\").append(\"<option value='\"+value+\"'>\"+text+\"</option>\");   \r\n");
      out.write("\t\t});\r\n");
      out.write("\t\t$(\"#common_toSelect\").empty();\r\n");
      out.write("\t}\r\n");
      out.write("\tfunction commonSelectItemDelAll(){\r\n");
      out.write("\t\t$(\"#common_selected option\").each(function(){\r\n");
      out.write("\t\t\tvar value=$(this).val();\r\n");
      out.write("\t\t\tvar text=$(this).text();\r\n");
      out.write("\t\t\t$(\"#common_toSelect\").append(\"<option value='\"+value+\"'>\"+text+\"</option>\");   \r\n");
      out.write("\t\t});\r\n");
      out.write("\t\t$(\"#common_selected\").empty();\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\tfunction getSelectedData(){\r\n");
      out.write("\t\tvar result=new Array();\r\n");
      out.write("\t\t$(\"#common_selected option\").each(function(){\r\n");
      out.write("\t\t\tvar item={\r\n");
      out.write("\t\t\t\tuserId:$(this).val(),\r\n");
      out.write("\t\t\t\toperatorname:$(this).text()\r\n");
      out.write("\t\t\t};\r\n");
      out.write("\t\t\tresult.push(item);\r\n");
      out.write("\t\t});\r\n");
      out.write("\t\treturn result;\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\tfunction loadCommonSelectData(options){\r\n");
      out.write("\t\t$(\"#common_selected\").empty();\r\n");
      out.write("\t\t$(\"#common_toSelect\").empty();\r\n");
      out.write("\t\t//处理旧数据\r\n");
      out.write("\t\tvar selectedUnids=\"\";\r\n");
      out.write("\t\t$(options.selectedData).each(function(index,obj){\r\n");
      out.write("\t\t\tselectedUnids+=obj.userId+\";\";\r\n");
      out.write("\t\t\tvar value=obj.userId;\r\n");
      out.write("\t\t\tvar text=obj.operatorname;\r\n");
      out.write("\t\t\t$(\"#common_selected\").append(\"<option value='\"+value+\"'>\"+text+\"</option>\");  \r\n");
      out.write("\t\t});\r\n");
      out.write("\t\t\r\n");
      out.write("\t\t//加载系统用户\r\n");
      out.write("\t\tif(options.type==\"01\"){\r\n");
      out.write("\t\t\tSysOperatorAction.getAllSysOperator(function(result){\r\n");
      out.write("\t\t\t\tif(result.resultCode==\"0\"){\r\n");
      out.write("\t\t\t\t\t$(result.returnList).each(function(index,obj){\r\n");
      out.write("\t\t\t\t\t\tvar value=obj.unid;\r\n");
      out.write("\t\t\t\t\t\tvar text=obj.name;\r\n");
      out.write("\t\t\t\t\t\tif(selectedUnids.indexOf(value+\";\")<0){\r\n");
      out.write("\t\t\t\t\t\t\t$(\"#common_toSelect\").append(\"<option value='\"+value+\"'>\"+text+\"</option>\");  \r\n");
      out.write("\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t});\r\n");
      out.write("\t\t\t\t}else{\r\n");
      out.write("\t\t\t\t\tshowMsg(\"加载列表数据时出错，可能原因为：\\n\"+result.resultMessage);\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t});\r\n");
      out.write("\t\t}else if(options.type==\"02\"){//加载系统角色\r\n");
      out.write("\t\t\tSysRoleAction.getSysRoleList(null,function(result){\r\n");
      out.write("\t\t\t\tif(result.resultCode==\"0\"){\r\n");
      out.write("\t\t\t\t\t$(result.returnList).each(function(index,obj){\r\n");
      out.write("\t\t\t\t\t\tvar value=obj.unid;\r\n");
      out.write("\t\t\t\t\t\tvar text=obj.name;\r\n");
      out.write("\t\t\t\t\t\tif(selectedUnids.indexOf(value+\";\")<0){\r\n");
      out.write("\t\t\t\t\t\t\t$(\"#common_toSelect\").append(\"<option value='\"+value+\"'>\"+text+\"</option>\");  \r\n");
      out.write("\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t});\r\n");
      out.write("\t\t\t\t}else{\r\n");
      out.write("\t\t\t\t\tshowMsg(\"加载列表数据时出错，可能原因为：\\n\"+result.resultMessage);\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t});\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}\r\n");
      out.write("</script>\r\n");
      out.write("<div id=\"commonSelectWin\" style=\"display: none\">\r\n");
      out.write("\t<table style=\"width: 100%;height: 90%;table-layout: fixed;\">\r\n");
      out.write("\t\t<tr>\r\n");
      out.write("\t\t\t<td valign=\"top\" style=\"width: 40%;height: 100%\">\r\n");
      out.write("\t\t\t\t待选列表：<br/>\r\n");
      out.write("\t\t\t\t<select size=\"15\" style=\"width: 100%;height: 95%\" id=\"common_toSelect\">\r\n");
      out.write("\t\t\t\t</select>\r\n");
      out.write("\t\t\t</td>\r\n");
      out.write("\t\t\t<td valign=\"middle\" style=\"width: 10%;height: 100%\" align=\"center\">\r\n");
      out.write("\t\t\t\t<input type=\"button\" value=\"添加\" id=\"common_select_add\"/><br/><br/>\r\n");
      out.write("\t\t\t\t<input type=\"button\" value=\"删除\" id=\"common_select_del\"/><br/><br/>\r\n");
      out.write("\t\t\t\t<input type=\"button\" value=\"添加全部\" id=\"common_select_add_all\"/><br/><br/>\r\n");
      out.write("\t\t\t\t<input type=\"button\" value=\"删除全部\" id=\"common_select_del_all\"/><br/><br/>\r\n");
      out.write("\t\t\t</td>\r\n");
      out.write("\t\t\t<td valign=\"top\" style=\"width: 40%;height: 100%\">\r\n");
      out.write("\t\t\t\t已选列表：<br/>\r\n");
      out.write("\t\t\t\t<select size=\"15\" style=\"width: 100%;height: 95%\" id=\"common_selected\">\r\n");
      out.write("\t\t\t\t</select>\r\n");
      out.write("\t\t\t</td>\r\n");
      out.write("\t\t\t\r\n");
      out.write("\t\t</tr>\r\n");
      out.write("\t</table>\r\n");
      out.write("</div>\r\n");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try { out.clearBuffer(); } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
